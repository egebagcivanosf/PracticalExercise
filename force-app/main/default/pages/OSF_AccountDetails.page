<apex:page standardController="Account" extensions="OSF_AccDetailsExtension" id="page">
    <apex:slds />
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
            <apex:form>
            <apex:pageBlock title="Account Primary Contact">
                <apex:pageBlockSection >
                    <apex:inputField value="{! Account.Name }"/>
                    <apex:inputField value="{! Account.Type }"/>
                    <apex:inputField value="{! Account.Phone }"/>
                    <apex:inputField value="{! Account.AccountNumber }"/>
                    <apex:inputField value="{! Account.Active__c }"/>
                    <apex:inputField value="{! Account.Fax }"/>
                </apex:pageBlockSection>
                <apex:pageBlockButtons>
                    <apex:commandButton action="{! save }" value="Save" />
                    <apex:commandButton action="{! cancel }" value="Cancel" />
                </apex:pageBlockButtons>
            </apex:pageBlock>
            </apex:form>

            

            <apex:pageBlock title="Related Contacts" id="p1">
    <apex:pageBlockTable value="{!Account.contacts}" var="contact" id="p2">

        <apex:column value="{!contact.Name}"/>
        <apex:column value="{!contact.Title}"/>
        <apex:column value="{!contact.Phone}"/>
        <apex:column value="{!contact.Is_Primary_Contact__c}"/>
        <apex:column>
           <apex:form>
                <apex:outputLink rendered="{!Contact.Is_Primary_Contact__c}">
                     <svg aria-hidden="true" class="slds-icon slds-icon--large slds-icon-standard-user">
                     <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#user')}"></use>
                     </svg>     
                </apex:outputLink>

                <apex:commandButton value="Set As Primary" action="{!showPopup}" 
                rerender="tstpopup"
                rendered="{! !Contact.Is_Primary_Contact__c}"
                > 
                <apex:param name="actid" value="{!contact.id}" assignTo="{!actid}"/> 
                </apex:commandButton>
        <apex:outputPanel id="tstpopup"> 
            <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}"/> 
            <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}"> 
                <p>Do you want to set this contact as primary?</p>
                <apex:commandButton value="Yes" action="{! setPrimary}" rerender="p1,p2"/> 
                <apex:commandButton value="No" action="{!closePopup}" rerender="tstpopup"/> 
            </apex:outputPanel> 
        </apex:outputPanel>
           
            </apex:form>
        </apex:column>
    </apex:pageBlockTable>
</apex:pageBlock>
</html>
<style type="text/css"> 
    .custPopup{ background-color: white; border-width: 2px; border-style: solid; z-index: 9999; left: 50%; padding:11px; position: absolute; width: 600px; margin-left: -240px; top:100px; } 
    .popupBackground{ background-color:black; opacity: 0.20; filter: alpha(opacity = 20); position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: 9998; } 
</style> 
</apex:page>